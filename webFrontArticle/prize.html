 <!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>mobile大转盘抽奖</title>
    <meta name="keywords" content="H+后台主题,后台bootstrap框架,会员中心主题,后台HTML,响应式后台">
    <meta name="description" content="H+是一个完全响应式，基于Bootstrap3最新版本开发的扁平化主题，她采用了主流的左右两栏式布局，使用了Html5+CSS3等现代技术">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>

    <link rel="shortcut icon" href="favicon.ico">
    <link href="../css/style.css?v=4.1.0" rel="stylesheet">
    <link href="../layui/css/layui.css" rel="stylesheet">
    <!-- <link href="../layui/css/layui.mobile.css" rel="stylesheet"> -->
    <link href="../css/article.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/nativeShare.css"/>

</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content  animated fadeInRight">
        <nav class="nav_article clear">
            <a class="return_page" href="javascript:;"><i class="layui-icon">&#xe65c;</i></a>
            <a class="share_button" style="float: right;" href="javascript:;"><i class="layui-icon">&#xe641;</i></a>
        </nav>
        <article>
            <h3>mobile大转盘抽奖</h3>
            <section class="react_show">
                <p>效果展示</p>
                <img class="react_img" src="../img/prize.PNG" alt="">
            </section>
            <section class="react_show">
                <p>demo效果查看：</p>
                <a class="link_style" target="_blank" href="http://www.wanderyun.com/demo/prize/prize.html">mobile大转盘抽奖</a>
            </section>
            <section class="react_show">
                <p>demo链接下载(喜欢就送颗真心撒)：</p>
                <a class="link_style" target="_blank" href="https://github.com/vlily/shareDemo/tree/master/mobile/prize">mobile大转盘抽奖</a>
            </section>
            <section class="code_infor">
            <!-- 代码编辑器 -->
            <!-- <pre class="layui-code layui-code layui-box layui-code-view" lay-title="html代码" lay-encode="false">
            </pre>    -->
            <!-- <pre class="layui-code layui-code layui-box layui-code-view" lay-title="css代码" lay-encode="false">
            </pre>  -->  
            <pre class="layui-code layui-code layui-box layui-code-view" lay-title="js代码" lay-encode="false">
//html和css有点多，只展示js部分
$(function (){
    // bRotate表示抽奖状态
    var bRotate = false;
    // 转动
    function rotateFn(awards, angles, imgSrc){
        bRotate = !bRotate;
        $('#rotate').stopRotate();
        $('#rotate').rotate({
            angle:0,
            animateTo:angles+1800,
            duration:6000,
            callback:function (){
                // console.log(arrPrize[0]);
                bRotate = !bRotate;
                $('#mark').fadeIn();
                $('#mark').css("z-index", 4);
                $('#mark .red-img').attr("src",imgSrc);
                //alert(txt);
                $('#mark').click(function(){
                    $(this).fadeOut();
                })
            }
        })
    };
    // 点击抽奖
    $('.submit').click(function (){
        if(bRotate)return;//如果正在转动，点击时将不再重复执行
        // ajax({
        //      url: 'post.php',
        //      type: 'POST',
        //      data: {'intro': 'post请求'},
        //      success:function(res){
        //          res = JSON.parse(res);
        //          document.getElementById('b').innerHTML = res.intro;
        //          console.log(res);
        //      },
        //         error: function(error) {}
        //  });
        var item = rnd(0,7);
        var arrPrize = ["img/prize5.png", "img/prize10.png", "img/prize20.png", "img/prize50.png", "img/prize100.png", "img/prize200.png", "img/prize500.png", "img/prize1000.png"];
        //5分转动225度，10分转动135度，以此类推
        switch (item) {
            case 0:
                rotateFn(0, 225, arrPrize[item]);
                break;
            case 1:
                rotateFn(1, 135, arrPrize[item]);
                break;
            case 2:
                rotateFn(2, 315, arrPrize[item]);
                break;
            case 3:
                rotateFn(3, 45, arrPrize[item]);
                break;
            case 4:
                rotateFn(4, 90, arrPrize[item]);
                break;
            case 5:
                rotateFn(5, 270, arrPrize[item]);
                break;
            case 6:
                rotateFn(6, 180, arrPrize[item]);
                break;
            case 7:
                rotateFn(7, 360, arrPrize[item]);
                break;
        }
    });
    $("#marquee").marquee({
        duration: 10000,
        gap: 50,
        delayBeforeStart: 0,
        direction: 'left',
        duplicated: true,
    }); 
});
// 设置奖项(虚拟数据)
function rnd(n, m){
    return Math.floor(Math.random()*(m-n)+n)
}
            </pre>   
            <!-- 代码编辑器完 -->
            </section>
        </article>
        <!-- 分享 -->
        <div id="nativeShare"></div>
    </div>
</body>
<!-- 全局js -->
    <script src="../js/jquery.min.js?v=2.1.4"></script>
    <script src="../layui/layui.all.js"></script>
    <script src="../js/nativeShare.js"></script>
    <script src="../js/public.js"></script>
    <!-- 自定义js -->
<script>
    $(function(){
        layui.use("code",function(){
            layui.code({
                encode: true,
            });
        })
        $(".return_page").click(function(){
            history.go(-1);
        })
    })
</script>
</html>
